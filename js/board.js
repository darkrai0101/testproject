function getRandom(e){return Math.round(Math.random()*(e-1))}function newArray(e){var t=new Array;for(var n=0;n<e;n++)t[n]=new Array;return t}function getNewMatrix(e){var t,n,r,i;var s=newArray(18);for(t=0;t<18;t++)for(n=0;n<11;n++)s[t][n]=0;if(e<=30){if(e<=10){pW=57;pH=57;r=11;i=6}else{pW=45;pH=45;r=15;i=8}var o=map(e);var u=0;for(t=1;t<=r;t++)for(n=1;n<=i;n++)if(o[n*(r+1)+t])u++;_bor.remain=o[0];var a=_bor.remain/2,f=0,l;while(a>0){random=getRandom(36)+1;l=getRandom(a--)+1;for(t=1;t<=r;t++){for(n=1;n<=i;n++){if(o[n*(r+1)+t]&&s[t][n]==0){if(f==0){s[t][n]=random;f=1}else{l--;if(l==0){s[t][n]=random;f=0;break}}}}if(l==0)break}}}else{var c,u,h,p;var f;_bor.remain=h=144;pW=41;pH=41;for(c=1;c<=36;c++){for(u=1;u<=4;u++){p=getRandom(h--)+1;f=false;for(t=1;t<=16;t++){if(f)break;else for(n=1;n<=9;n++){if(s[t][n]==0){p--;if(p==0){f=true;s[t][n]=c;break}}}}}}}return s}function Point(e,t){this.x=e;this.y=t}function cP(e,t,n,r,i){if(t==r&&n==i)return null;if(e[t][n]!=e[r][i])return null;if(!e[r][i]||!e[t][n])return null;if(e[r][i]==-1||e[t][n]==-1){return null}var s,o,u,a,f;var l=new Array;var c=newArray(18);var h=newArray(18);for(u=0;u<198;u++)l[u]=new Point(0,0);s=0;o=0;l[0].x=t;l[0].y=n;for(u=0;u<18;u++)for(a=0;a<11;a++)c[u][a]=new Point(-1,-1);c[t][n].x=-2;h[t][n]=0;var p=new Array;var d=new Array;var v=new Array;while(s<=o){u=l[s].x;a=l[s].y;s++;for(f=0;f<4;f++){p[f]=true;d[f]=u;v[f]=a}do{for(f=0;f<4;f++)if(p[f]){d[f]+=xMove[f];v[f]+=yMove[f];if(!checkInbor(d[f],v[f])){p[f]=false;continue}if(d[f]==r&&v[f]==i){c[d[f]][v[f]].x=u;c[d[f]][v[f]].y=a;return createWay(c,r,i)}if(e[d[f]][v[f]]>0||e[d[f]][v[f]]==-1){p[f]=false;continue}if(c[d[f]][v[f]].x!=-1)continue;if(h[u][a]==2)continue;o++;l[o].x=d[f];l[o].y=v[f];c[d[f]][v[f]].x=u;c[d[f]][v[f]].y=a;h[d[f]][v[f]]=h[u][a]+1}}while(p[0]||p[1]||p[2]||p[3])}return null}function checkInbor(e,t){return e>=0&&e<18&&t>=0&&t<11}function createWay(e,t,n){arrList=new Array;var r,i;do{arrList.push(new Point(t,n));r=e[t][n].x;i=e[t][n].y;t=r;n=i}while(t!=-2);return arrList}function check(){var e=new Array;for(var t=0;t<144-1;t++)for(var n=1;n<144;n++)if(cP(_bor.arVa,_bor.pieces[t].col,_bor.pieces[t].row,_bor.pieces[n].col,_bor.pieces[n].row)){e.push(t);e.push(n);return e}return null}function fM(e){var t,n,r,i,s;var o=new Array;var u=new Array;for(n=0;n<=16;n++)for(r=0;r<=9;r++){if(e[n][r]!=0){var a=new Point(n,r);o.push(a);u.push(e[n][r])}}t=u.length;for(n=0;n<t;n++){i=u.pop();while(1){s=getRandom(t);if(o[s].x!=-1){e[o[s].x][o[s].y]=i;o[s].x=-1;break}}}_bor.pieces=[];for(var n=1;n<=16;n++)for(var r=1;r<=9;r++){var f=new Pieces(n,r,pW,pH,e[n][r]);_bor.pieces.push(f)}}function reMa(e,t,n,r){var i;if(t==2){if(_bor.pieces[e].col==n)return;while(_bor.pieces[e].col>n){i=_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row];_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row]=_bor.arVa[_bor.pieces[e-9].col][_bor.pieces[e-9].row];_bor.arVa[_bor.pieces[e-9].col][_bor.pieces[e-9].row]=i;i=_bor.pieces[e].number;_bor.pieces[e].number=_bor.pieces[e-9].number;_bor.pieces[e-9].number=i;e-=9}}else if(t==3){if(_bor.pieces[e].col==n)return;while(_bor.pieces[e].col!=n){i=_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row];_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row]=_bor.arVa[_bor.pieces[e+9].col][_bor.pieces[e+9].row];_bor.arVa[_bor.pieces[e+9].col][_bor.pieces[e+9].row]=i;i=_bor.pieces[e].number;_bor.pieces[e].number=_bor.pieces[e+9].number;_bor.pieces[e+9].number=i;e+=9}}else if(t==4){if(_bor.pieces[e].row==r)return;while(_bor.pieces[e].row>r){i=_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row];_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row]=_bor.arVa[_bor.pieces[e-1].col][_bor.pieces[e-1].row];_bor.arVa[_bor.pieces[e-1].col][_bor.pieces[e-1].row]=i;i=_bor.pieces[e].number;_bor.pieces[e].number=_bor.pieces[e-1].number;_bor.pieces[e-1].number=i;e-=1}}else if(t==5){if(_bor.pieces[e].row==r)return;while(_bor.pieces[e].row!=r){i=_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row];_bor.arVa[_bor.pieces[e].col][_bor.pieces[e].row]=_bor.arVa[_bor.pieces[e+1].col][_bor.pieces[e+1].row];_bor.arVa[_bor.pieces[e+1].col][_bor.pieces[e+1].row]=i;i=_bor.pieces[e].number;_bor.pieces[e].number=_bor.pieces[e+1].number;_bor.pieces[e+1].number=i;e+=1}}}function trSco(e){var t=new Array;var n=1;var r=1e4;for(var i=1;i<=5;i++){t.push(Math.floor(e/r));e=e%r;r=r/10;n++}return t}function acGi(e){if(e==1){_tiCo.ties+=1500*_tiCo.dec;if(_tiCo.ties>=386)_tiCo.ties=386;_bor.susStr(1)}else if(e==2){var t=Math.floor(Math.random()*7+1);if(t==1&&_meTo.nuMe<9){_meTo.nuMe++;numberTools[0]=_meTo.nuMe;user();_bor.susStr(2)}else if(t==2&&_meTo.nuBo<9){_meTo.nuBo++;numberTools[1]=_meTo.nuBo;user();_bor.susStr(3)}else if(t==4&&_meTo.nurTie<9){_meTo.nurTie++;numberTools[2]=_meTo.nurTie;user();_bor.susStr(4)}else if(t==6&&_meTo.nurSeh<9){_meTo.nurSeh++;numberTools[3]=_meTo.nurSeh;user();_bor.susStr(5)}else{_bor.susStr(6)}}else if(e==4){_tiCo.sttDoe=1;_bor.susStr(7)}else{_bor.susStr(6)}}function bor(e,t,n){this.context=n;this.mapWidth=e;this.mapHeight=t;this.borX=10;this.borY=10;this.pieces=[];this.level=0;this.isSelected=[];this.saeSed=0;this.list=new Array;this.pieToh;this.isWaiting=false;this.remain=144;this.piesSucs=null;_tiCo=new tiCo(this.context);_meTo=new meTo(this.context);_menPly=new menPly(this.context);_comeLel=new comeLel(this.context);_sttLel=new sttLel(this.context);this.alWaEfft=new Array;this.countalWaEfft=0;this.boom=false;this.bomSet=null;this.bomStr=null;this.active=0;this.search=new Array;this.complete=0;this.overTime=0;this.rearrange=0;this.iRearrange;this.sttLel;this.count=0;this.numberStar;this.fihGae=0;this.score1=0;this.score2=0;this.lastscore=0;this.arrScore;this.scoreDraw=[0,0,0,0,0];this.k=0;this.doubleScore=0;this.text;this.alpha=1;this.iBoom=0;this.jBoom=0}function map(e){switch(e){case 1:mapInfo=[18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0];break;case 2:mapInfo=[30,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1];break;case 3:mapInfo=[44,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,1,0,1,1,0,1,0,1,1,0,1,0,1,0,1,1,0,1,0,1,1,0,1,0,1,0,1,1,0,1,0,1,1,0,1,0,1,0,1,1,0,1,0,1,1,0,1,0,0,1,1,1,1,0,1,1,1,1,0];break;case 4:mapInfo=[34,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,0,1,1,1,0,0,1,0,0,0,1,0,0,1,1,1,0,0,1,0,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,0,1,1,1,0,0,1,0];break;case 5:mapInfo=[46,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,1,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,1,0,0,1,1,1,0,0,1,0];break;case 6:mapInfo=[52,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,0,0,0,1,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,0];break;case 7:mapInfo=[58,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,0,1,1,1,1,1,1,1,0,1];break;case 8:mapInfo=[58,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0];break;case 9:mapInfo=[66,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1];break;case 11:mapInfo=[32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0];break;case 12:mapInfo=[64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1];break;case 13:mapInfo=[78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1];break;case 14:mapInfo=[50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0];break;case 15:mapInfo=[72,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1];break;case 16:mapInfo=[88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0];break;case 17:mapInfo=[100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0];break;case 18:mapInfo=[78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1];break;case 19:mapInfo=[108,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0];break;case 21:mapInfo=[76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];break;case 22:mapInfo=[92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1];break;case 23:mapInfo=[78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0];break;case 24:mapInfo=[54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];break;case 25:mapInfo=[84,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0];break;case 26:mapInfo=[82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0];break;case 27:mapInfo=[102,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,0];break;case 28:mapInfo=[96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1];break;case 29:mapInfo=[80,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0,0,0,1,1,1,0,0,0,0,1,1,0,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0];break}return mapInfo}function Loading(e,t,n){this.context=n;this.mapWidth=e;this.mapHeigt=t;this.radius=15;this.startAngle=.5;this.endAngle=.25;this.count=0;this.lImg=function(){this.img=document.createElement("image");this.img.src="images/anhnen.png";this.img1=document.createElement("image");this.img1.src="images/hinh1.png";this.img2=document.createElement("image");this.img2.src="images/hinh2.png"};this.load=0;this.update=function(e){this.load=e*25.4}}function loading(){_canvas=document.getElementById("myCanvas");_context=_canvas.getContext("2d");_loading=new Loading(_canvas.width,_canvas.height,_context);_loading.lImg();_loading.img2.onload=function(){id=window.setInterval(loadingUpdate,50)}}function canvas_mousedown(e){if(borActive){_bor.mouseDown()}else if(screenActive){_Screen.mouseDown()}else if(selectBgrActive){_selectBgr.mouseDown()}}function canvas_mousemove(e){targetX=e.pageX-_canvas.offsetLeft;targetY=e.pageY-_canvas.offsetTop}function canvas_mouseup(e){}function loadComplete(){_canvas=document.getElementById("myCanvas");_context=_canvas.getContext("2d");_canvas.onmousedown=canvas_mousedown;_canvas.onmousemove=canvas_mousemove;_canvas.onmouseup=canvas_mouseup;clearInterval(id);clear();_Screen=new Screen(_canvas,_context);_selectBgr=new selectBgr(_canvas,_context);_bor=new bor(borWidth,borHeight,_context);_Screen.start();update()}function update(){currentTime=new Date;diffTime=Math.ceil(currentTime.getTime()-lastTime.getTime());if(diffTime>=1e3){gameFPS=frameCount;frameCount=0;lastTime=currentTime}frameCount++;requestAnimFrame(update);if(borActive){_bor.draw()}else if(screenActive){_Screen.draw()}else if(selectBgrActive){_selectBgr.draw()}}function loadingUpdate(){clear();_loading.draw()}function meTo(e){this.context=e;this.startNavigator=744;this.activeNavigator=680;this.yNavigator=220;this.startX=594;this.activeX=526;this.active=-1;this.alpha=1;this.xNavigator=this.startNavigator;this.x=this.startX;this.speed=4;this.activeTools=0;this.activeDown=0;this.nuMe=numberTools[0];this.nuBo=numberTools[1];this.nurTie=numberTools[2];this.nurSeh=numberTools[3]}function menPly(e){this.context=e;this.pause=0;this.reset=0;this.menuSelect=0;this.music;this.typeMusic;this.activeMenu=1}function wayEffect(e){this.context=e;this.list=[];this.over={x:null,y:null};this.x1=null;this.y1=null;this.x2=null;this.y2=null;this.effect1={x:null,y:null,x1:null,v:null,y1:null,i:null};this.effect2={x:null,y:null,v:null,x1:null,y1:null,i:null};this.v1=null;this.v2=null;this.time=30;this.type=null;this.effect}function comeLel(e){this.context=e;this.counter=1;this.i=0;this.nextlevel=0;this.reset=0;this.menuSelect=0;this.j=0;this.check;if(!username)this.haveUser=0;else this.haveUser=1;this.sendscore=0;this.popup=true;this.sendsuccess=false;this.l=false;this.u=false;this.xlui=1;this.xlu=-480}function sttLel(e){this.context=e;this.start=function(){this.x=800;this.type=0;this.i=45;this.j=1;if(gameFPS>24)this.v=1200/gameFPS;else this.v=50}}function user(){var e;var t=arrayStar[0];var n=arrayScore[0];var r=numberTools[0];for(e=1;e<arrayStar.length;e++){t+="|"+arrayStar[e];n+="|"+arrayScore[e]}r+="|"+numberTools[1]+"|"+numberTools[2]+"|"+numberTools[3];ajaxFunction(t,n,r)}function ajaxFunction(e,t,n){if(e==0)e=arrayStar;if(t==0)t=arrayScore;if(n==0)n=numberTools;var r="data="+e+":"+t+":"+n;$.ajax({type:"POST",url:"update.php",data:r,success:function(e){}})}function toggleFullScreen(){if(!document.mozFullScreen&&!document.webkitFullScreen){if(videoElement.mozRequestFullScreen){videoElement.mozRequestFullScreen()}else{videoElement.webkitRequestFullScreen(Element.ALLOW_KEYbor_INPUT)}}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{document.webkitCancelFullScreen()}}}function Pieces(e,t,n,r,i){this.x=(e-.2)*(n+4);this.y=(t+.2)*(r+4);this.col=e;this.row=t;this.width=n;this.height=r;this.number=i;this.Selected=null;this.setHighlight=null;this.search=null;this.count=21;this.i1=0;this.i2=0;this.a=0}function loadImages(e,t){var n=0,r=0;var i=0;var s=0;var o=0;var u=0;for(var a in e){s++}for(var a in res2){u++}var f=0;var l=s+u;for(var a in res2){_listSound[a]=new Audio;_listSound[a].src=res2[a];f++;_loading.update(f*10/l)}for(var a in e){_listImage[a]=new Image;_listImage[a].onload=function(){f++;_loading.update(f*10/l);if(++i>=s){t()}};_listImage[a].src=e[a]}}function Screen(e,t){this.canvas=e;this.context=t;this.width=800;this.height=480;this.contain=function(e,t){if(e>=302&&e<=490&&t>=220&&t<=303)return 0;else if(e>=370&&e<=428&&t>=330&&t<=392)return 1;else if(t>=285&&t<=335&&e>=705&&e<=765)return 2;else if(t>=350&&t<=400&&e>=705&&e<=765)return 3;return-1};this.i;this.isInfo;this.isMusic;this.typeMusic;this.helpActive=0}function selectBgr(e,t){this.canvas=e;this.context=t;this.selectLevel=[];this.piecesTouch=null;this.page=1;for(var n=1;n<=4;n++){var r=new levelPikachu(n);this.selectLevel.push(r)}_selectLevel=new selectLevel(this.canvas,this.context);this.selectLevelActive=0;this.i=1;this.j=1;this.page=0;this.nextScreen=0;this.xNext1=this.selectLevel[0].x;this.xNext2=this.selectLevel[1].x;this.xNext3=this.selectLevel[2].x;this.xNext4=this.selectLevel[3].x;this.way}function levelPikachu(e){this.numberLevel=e;this.openLevel=false;this.x=20+(e-1)*380;this.j1=(e-1)*10+1;this.j2=this.j1+8;this.moveMouse=false;this.sum}function selectLevel(e,t){this.canvas=e;this.context=t;this.level;this.selectLevel=[];this.add=0;this.piecesTouch=null;this.score}function setLevel(e,t){if(t<=9){this.numberLevel=e+t;if(this.numberLevel<=arrayStar[0])this.openLevel=1;this.x=200+(t-1)*150;this.width=150;this.height=150;this.numberDraw=t*44;this.moveMouse=false;this.star=arrayStar[this.numberLevel];if(t<4)this.y=50;else if(t<7){this.x=this.x-445;this.y=190}else{this.x=this.x-892;this.y=340}this.numberX=this.x+55;this.numberY=this.y+50}else{this.numberLevel=t}}function tiCo(e){this.context=e;this.ties=386;this.t;this.save;this.random;this.sttDoe=0;this.savePoint=0;this.t2=0;this.t1=0;this.t3}bor.prototype.draw=function(){if(!this.fihGae){this.moveMouse();this.context.drawImage(_listImage["background"+this.bgr],0,0,borWidth,borHeight);for(var e=this.pieces.length-1;e>=0;e--){if(this.pieces[e].number!=0){this.pieces[e].draw(this.context)}}if(this.alWaEfft.length>0){for(var e=0;e<this.alWaEfft.length;e++){if(this.alWaEfft[e]!=null){this.alWaEfft[e].draw();if(this.alWaEfft[e].time==0){this.alWaEfft[e]=null;if(this.remain==0){this.finLes()}else this.count--}}}}if(this.level>30){if(this.score1>0){this.score1--;if(!this.score1){this.score+=this.score2*100;this.scoreDraw=trSco(this.score);this.score2=0}}}if(this.piesSucs!=null){var t=new wayEffect(this.context);t.start(this.list);if(!this.doubleScore)this.score+=200;else _tiCo.savePoint+=200;this.k=0;if(this.pieces[this.isSelected[0]].a||this.pieces[this.isSelected[1]].a){acGi(_tiCo.random);if(this.pieces[this.isSelected[0]].a)this.pieces[this.isSelected[0]].a=0;else this.pieces[this.isSelected[1]].a=0}if(this.level>30){if(!this.score1){this.score2=2;this.score1=100}else{this.score2++;this.score1=100}}this.arrScore=trSco(this.score);this.alWaEfft[this.countalWaEfft]=t;this.countalWaEfft++;if(this.countalWaEfft==1)this.countalWaEfft=0;this.pieces[this.isSelected[0]].number=0;this.pieces[this.isSelected[1]].number=0;this.pieces[this.search[0]].search=0;this.pieces[this.search[1]].search=0;if(!this.rearrange){if(this.isSelected[0]==this.search[0]||this.isSelected[0]==this.search[1]||this.isSelected[1]==this.search[0]||this.isSelected[1]==this.search[1]){this.search=check()}_bor.isSelected=[];_bor.search=check()}this.piesSucs=null}else{if(this.isSelected.length!=[]){for(var e=this.isSelected.length-1;e>=0;e--){this.pieces[this.isSelected[e]].isSelected(this.context)}}}if(this.lastscore<this.score){if(this.k==0){setTimeout(function(){_bor.updateScore()},60);this.k=1}}_tiCo.draw();_meTo.draw();this.context.globalAlpha=1;this.context.drawImage(_listImage["scoreBar"],610,-3,190,40);this.context.drawImage(_listImage["menuNumber"],44*this.scoreDraw[0],0,44,53,685,6,20,27);this.context.drawImage(_listImage["menuNumber"],44*this.scoreDraw[1],0,44,53,704,6,20,27);this.context.drawImage(_listImage["menuNumber"],44*this.scoreDraw[2],0,44,53,724,6,20,27);this.context.drawImage(_listImage["menuNumber"],44*this.scoreDraw[3],0,44,53,742,6,20,27);this.context.drawImage(_listImage["menuNumber"],44*this.scoreDraw[4],0,44,53,764,6,20,27);if(_tiCo.sttDoe){this.context.font="bold 12pt score";this.context.fillStyle="black";this.context.fillText("["+_tiCo.t3+"] x2",680,50)}if(this.text){if(this.alpha==1){setTimeout(function(){_bor.alpha=.8},1e3);this.alpha=.9}else if(this.alpha==.8){setTimeout(function(){_bor.alpha=.6},400);this.alpha=.7}else if(this.alpha==.6){setTimeout(function(){_bor.alpha=.4},250);this.alpha=.5}else if(this.alpha==.4){setTimeout(function(){_bor.alpha=.2},120);this.alpha=.3}else if(this.alpha==.2){setTimeout(function(){_bor.text=null;this.alpha=0},80);this.alpha=.1}this.context.font="bold 16pt arial";this.context.fillStyle="rgba(0, 46, 184,"+this.alpha+")";this.context.fillText(this.text,240,53)}if(!this.sttLel){this.active=1;_sttLel.draw()}else{_meTo.update();if(this.active){if(!this.overTime&&!this.complete){_listSound["pikaWho"].pause();if(soundActive)_listSound["pikaSad"].play();_listSound["soundMain"].pause();this.context.drawImage(_listImage["imagePause"],0,-5,800,490);this.context.font="bold 16pt score";this.context.fillStyle="#873502";this.context.fillText("Level:"+this.level+"/36",248,55);this.context.font="bold 15pt score";this.context.fillText("HighScore:"+arrayScore[this.level],412,55);_menPly.draw()}}else{if(soundActive)_listSound["soundMain"].play();if(_listSound["pikaSad"].currentTime){_listSound["pikaSad"].currentTime=0}}}_menPly.draw();if(this.overTime&&!this.count)_comeLel.draw(false);if(this.search==null){fM(_bor.arVa);this.search=check()}if(this.complete){this.active=1;_comeLel.draw(true,this.numberStar)}if(this.bomStr){if(soundActive)_listSound["boom"].play();if(this.boom<=25){this.context.drawImage(_listImage["boomEffect"],this.jBoom*64,this.iBoom*64,64,64,this.pieces[this.bomSet].x,this.pieces[this.bomSet].y,67,67);this.context.drawImage(_listImage["boomEffect"],this.jBoom*64,this.iBoom*64,64,64,this.pieces[this.boomSearch].x,this.pieces[this.boomSearch].y,67,67);this.jBoom++;if(this.jBoom==5){this.iBoom++;this.jBoom=0}this.boom++}else if(this.boom>25){this.iBoom=0;this.jBoom=0;this.bomStr=null;this.boom=null;this.remain-=2;if(this.remain==0)this.finLes();_listSound["boom"].pause();_listSound["boom"].currentTime=0}this.arVa[this.pieces[this.bomSet].col][this.pieces[this.bomSet].row]=0;this.pieces[this.bomSet].number=0;this.arVa[this.pieces[this.boomSearch].col][this.pieces[this.boomSearch].row]=0;this.pieces[this.boomSearch].number=0}}else this.context.drawImage(_listImage["backgroundFinish"],0,0);this.context.drawImage(_listImage["full"],-1,451,40,30)};bor.prototype.setBackGround=function(){this.bgr=Math.round(Math.random()*11)};bor.prototype.setNewlevel=function(){this.arVa=getNewMatrix(this.level);this.setBackGround();for(var e=1;e<=16;e++)for(var t=1;t<=9;t++){var n=new Pieces(e,t,pW,pH,this.arVa[e][t]);this.pieces.push(n)}this.ties=timeLevel[this.level*3];this.search=check()};bor.prototype.createNewGame=function(e){_sttLel.start();this.sttLel=0;this.score=0;this.lastscore=0;this.scoreDraw=trSco(this.score);this.level=e;if(this.level>=22){if(this.level<30){this.iRearrange=this.level%20;this.rearrange=1}else if(this.level>=32){this.iRearrange=this.level%30;this.rearrange=1}else this.rearrange=0}else this.rearrange=0;this.active=0;this.count=0;_meTo.activeTools=0;this.pieces=[];this.isSelected=[];this.isWaiting=null;clearInterval(_tiCo.timeID);clearInterval(_tiCo.alertID);_tiCo.ties=386;this.setNewlevel()};bor.prototype.moveMouse=function(){_meTo.check(targetX,targetY);for(var e=this.pieces.length-1;e>=0;e--){if(!this.active){if(this.pieces[e].moMoPi(targetX,targetY)){this.pieToh=e;if(!this.pieces[e].touch){this.pieces[e].touch=true;this.pieces[e].setHighlight=1;break}}else if(this.pieces[e].touch){this.pieces[e].touch=false;this.pieces[e].setHighlight=0;this.pieToh=null}}}if(targetY>=450&&targetX<=40){this.fullscreen=1}else this.fullscreen=0};bor.prototype.mouseDown=function(){if(!this.active){var e=this.pieToh;if(this.rearrange&&this.isSelected[1]!=null)return;if(e!=null&&this.pieces[e].number!=0){if(!this.boom){this.onClickPiece(e,this.pieces[e].col,this.pieces[e].row)}else if(!this.bomStr){this.bomSet=e;this.bomStr=1;for(var t=0;t<this.pieces.length;t++){if(this.pieces[t].number==this.pieces[e].number&&e!=t){this.boomSearch=t;return}}}}}else if(this.overTime){_comeLel.mouseDown()}if(this.complete)_comeLel.mouseDown();else if(!this.overTime){_menPly.mouseDown();_meTo.mouseDown()}if(this.fullscreen)toggleFullScreen()};bor.prototype.onClickPiece=function(e,t,n){if(this.isWaiting){this.isWaiting=false;var r=cP(this.arVa,this.xFirst,this.yFirst,t,n);if(r!=null){this.piesSucs=true;this.isSelected.push(e);this.list=r;if(this.level<=29){if(!this.saeSed){this.saeSed=this.arVa[this.xFirst][this.yFirst]}else{if(this.saeSed==this.arVa[this.xFirst][this.yFirst]){if(!this.score2)this.score2+=2;else this.score2++}else{this.saeSed=this.arVa[this.xFirst][this.yFirst];this.score+=this.score2*100;this.arrScore=trSco(this.score);this.score2=0}}}this.arVa[this.xFirst][this.yFirst]=0;this.arVa[t][n]=0;this.pieToh=null;this.remain-=2;this.count++;if(this.level>10){if(_tiCo.ties<=381)_tiCo.ties+=5;else _tiCo.ties=386}}else{this.pieces[e].touch=0;this.pieces[this.isSelected[0]].Selected=0;if(this.level>10){if(_tiCo.ties>=10)_tiCo.ties-=10;else _tiCo.ties=0}if(this.score2){this.score+=this.score2*100;this.arrScore=trSco(this.score)}this.isSelected=[]}}else{this.isSelected=[];this.isSelected.push(e);this.xFirst=t;this.yFirst=n;this.isWaiting=true;this.pieToh=null}};bor.prototype.drawWay=function(e){var t=e[0];var n;for(var r=1;r<e.length;r++){n=e[r];this.context.beginPath();this.context.moveTo((t.x-.2)*(pW+4)+pW/2,(t.y+.2)*(pH+4)+pH/2);this.context.lineTo((n.x-.2)*(pW+4)+pW/2,(n.y+.2)*(pH+4)+pH/2);this.context.lineWidth=4;this.context.stroke();t=n}};bor.prototype.updateScore=function(){var e=0;for(var t=4;t>=0;t--){if(this.scoreDraw[t]!=this.arrScore[t]){this.scoreDraw[t]+=1;if(this.scoreDraw[t]==10)this.scoreDraw[t]=0;this.k=0;return}}this.lastscore=this.score};bor.prototype.finLes=function(){var e=this.ties-_tiCo.ties/_tiCo.t;if(e<=timeLevel[this.level*3+1])this.numberStar=3;else if(e<=timeLevel[this.level*3+2])this.numberStar=2;else this.numberStar=1;var t;t=arrayStar[this.level];if(t<this.numberStar)arrayStar[this.level]=this.numberStar;t=arrayStar[0];if(t==this.level){t++;arrayStar.push(0);arrayScore.push(0);if(!(t%10)){_selectBgr.selectLevel[t/10].openLevel=true;t++;arrayStar.push(0);arrayScore.push(0)}arrayStar[0]=t}this.score+=Math.floor((this.ties-e)*10);t=arrayScore[this.level];if(t<this.score){arrayScore[0]=parseInt(arrayScore[0]);arrayScore[0]+=this.score-parseInt(arrayScore[this.level]);arrayScore[this.level]=this.score}clearInterval(_tiCo.timeID);this.complete=1;user()};bor.prototype.susStr=function(e){var t;this.alpha=1;if(e==1)this.text="Cộng thêm thời gian!";else if(e==2)this.text="Thêm một vật phẩm sắp xếp lại!";else if(e==3)this.text="Thêm một vật phẩm Boom!";else if(e==4)this.text="Thêm một vật phẩm tăng thời gian!";else if(e==5)this.text="Thêm một vật phẩm tìm kiếm!";else if(e==6)this.text="Chúc bạn may mắn lần sau!";else if(e==7)this.text="Bắt đầu nhân hai điểm số!"};var time;var _startTime;var targetX;var targetY;var pW;var pH;var soundActive=1;var _bor;var borWidth=800;var borHeight=480;var borImg=new Image;var xMove=new Array(0,0,1,-1);var yMove=new Array(1,-1,0,0);var timeLevel=new Array(0,0,0,30,9,12,50,22,30,50,35,42,50,25,33,50,33,38,50,34,42,90,48,60,90,42,55,110,60,80,0,0,0,40,12,18,60,30,40,70,34,45,60,26,38,80,35,45,80,36,48,180,85,125,150,75,115,200,85,125,0,0,0,70,34,45,120,55,70,140,65,85,60,23,30,120,55,70,120,65,95,120,65,95,200,85,125,100,36,50,0,0,0,644,500,572,644,500,572,644,500,572,644,500,572,644,500,572,644,500,572,644,500,572,644,500,572,644,500,572);var mapInfo=new Array;var screenActive=1;var selectBgrActive=0;var borActive=0;Loading.prototype.draw=function(e){this.context.rect(0,0,800,480);this.context.fillStyle="black";this.context.fill();this.context.drawImage(this.img,0,100);this.context.drawImage(this.img2,252,288);this.context.drawImage(this.img1,270,300,this.load,17);this.context.beginPath();this.context.arc(this.mapWidth/2,this.mapHeigt/2,this.radius,this.startAngle*Math.PI,this.endAngle*Math.PI,true);this.context.lineWidth=3;this.context.strokeStyle="white";this.context.stroke();this.startAngle+=.25;this.endAngle+=.25};var id;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setInterval(e,1e3/60)}}();var gameFPS=0;var frameCount=0;var lastTime=new Date;var currentTime=new Date;var diffTime=0;meTo.prototype.draw=function(){this.context.globalAlpha=1;this.context.drawImage(_listImage["menutool1"],this.x,0);this.context.font="bold 25pt score";this.context.fillStyle="white";if(this.merge){this.context.drawImage(_listImage["merge"],740,212,55,55);this.context.fillText(this.nuMe,732,248)}else if(this.boom){this.context.drawImage(_listImage["boom"],740,156,55,55);this.context.fillText(this.nuBo,732,192)}else if(this.time){this.context.drawImage(_listImage["time"],740,98,55,55);this.context.fillText(this.nurTie,732,134)}else if(this.search){this.context.drawImage(_listImage["search"],742,264,55,55);this.context.fillText(this.nurSeh,732,300)}this.context.globalAlpha=this.alpha;this.context.drawImage(_listImage["menutool"],this.xNavigator,445,56,35)};meTo.prototype.update=function(){if(!this.activeTools){if(this.activeDown==1){if(this.x>this.activeX){this.x-=this.speed;if(this.xNavigator>this.activeNavigator){this.xNavigator-=this.speed;this.alpha-=.0625}}else this.active=2}else if(this.active==0){if(this.x<this.startX){this.x+=this.speed;if(this.xNavigator<this.startNavigator){this.xNavigator+=this.speed;this.alpha+=.0625}}else this.active=-1}if(!this.activeDown){this.merge=0;this.boom=0;this.search=0;this.time=0}else if(this.x<=this.activeX){if(targetX>=740&&targetX<=795){if(targetY>=212&&targetY<=267){this.merge=1;this.boom=0;this.search=0;return}if(targetY>=156&&targetY<=211){this.boom=1;this.merge=0;this.time=0;return}if(targetY>=98&&targetY<=153){this.time=1;this.boom=0;return}if(targetY>=264&&targetY<=319){this.search=1;this.merge=0;return}}}}};meTo.prototype.mouseDown=function(){if(!this.activeTools){if(this.active==1){this.activeDown=1;this.speed=240/gameFPS}if(this.activeDown){if(this.nuMe>0&&this.merge){fM(_bor.arVa);_bor.search=check();this.nuMe--;this.merge=0;numberTools[0]=this.nuMe;user()}else if(this.nuBo>0&&this.boom){_bor.boom=true;this.nuBo--;this.boom=0;numberTools[1]=this.nuBo;user()}else if(this.nurTie>0&&this.time){_tiCo.ties+=3e3*_tiCo.dec;if(_tiCo.ties>=386)_tiCo.ties=386;this.nurTie--;this.time=0;numberTools[2]=this.nurTie;user()}else if(this.nurSeh>0&&this.search){this.search=0;if(_bor.isSelected[0]){_bor.pieces[_bor.isSelected[0]].Selected=0;_bor.isSelected=[];_bor.isWaiting=0}_bor.pieces[_bor.search[0]].search=1;_bor.pieces[_bor.search[1]].search=1;this.nurSeh--;numberTools[3]=this.nurSeh;user()}}}};meTo.prototype.check=function(e,t){if(!this.activeTools){if(this.active==-1){if(e>=this.startNavigator&&t>=455){this.active=1}}else if(this.active==1){if(e<this.startNavigator&&t<455){this.active=-1}}else if(this.active==2){if(e<730){this.active=0;this.activeDown=0}}}};menPly.prototype.draw=function(){this.update();if(soundActive)this.typeMusic=0;else this.typeMusic=1;if(_bor.active==1){if(!this.menuSelect)this.context.drawImage(_listImage["buttonMenuSelect"],115,3,45,45);else this.context.drawImage(_listImage["buttonMenuSelect"],115,3,48,48)}if(!_bor.active)this.context.drawImage(_listImage["buttonMusic"+this.typeMusic],581,-3,38,38);if(!this.pause)this.context.drawImage(_listImage["pausePress"],10,3,45,45);else this.context.drawImage(_listImage["pausePress"],10,3,48,48);if(!this.reset)this.context.drawImage(_listImage["resetPress"],60,3,47,47);else this.context.drawImage(_listImage["resetPress"],60,3,50,50)};menPly.prototype.update=function(){if(targetX<=55&&targetY<=48&&targetX>=10&&targetY>=3){this.pause=1;this.reset=0;this.menuSelect=0;return}else this.pause=0;if(targetY<=35&&targetX>=583&&targetX<=612)this.music=1;else this.music=0;if(targetX<=108&&targetY<=48&&targetX>=60&&targetY>=3){this.reset=1;this.pause=0;this.menuSelect=0;return}else this.reset=0;if(_bor.active==1){if(targetX<=160&&targetY<=48&&targetX>=115&&targetY>=3){this.menuSelect=1;this.reset=0;this.pause=0;return}else this.menuSelect=0}};menPly.prototype.mouseDown=function(){if(!this.activeMenu){if(this.reset){_listSound["pikaSad"].pause();_listSound["pikaWho"].currentTime=0;_listSound["soundMain"].currentTime=0;if(soundActive)_listSound["pikaWho"].play();_bor.active=0;_meTo.activeTools=0;_bor.createNewGame(_bor.level);this.activeMenu=1}else if(this.pause){clearInterval(_tiCo.timeID);clearInterval(_tiCo.alertID);_listSound["pikaSad"].pause();if(!_bor.active){_bor.active=1;_meTo.activeTools=1}else{_bor.active=0;_meTo.activeTools=0;_tiCo.start(_bor.ties)}}else if(_bor.active==1&&this.menuSelect){_listSound["pikaSad"].pause();borActive=0;selectBgrActive=1;_selectLevel.add=0;_selectLevel.selectLevel=[];_selectLevel.start(_selectBgr.piecesTouch);this.menuSelect=0;_meTo.activeTools=0;clearInterval(_tiCo.timeID);clearInterval(_tiCo.alertID);this.activeMenu=1}else if(this.music){if(soundActive){soundActive=0;this.typeMusic=1;_listSound["soundMain"].pause();_listSound["pikaWho"].pause();_listSound["pikaWho"].currentTime=0;_listSound["pikaSad"].pause();_listSound["pikaSad"].currentTime=0}else{soundActive=1;this.typeMusic=0}}}};wayEffect.prototype.start=function(e){this.score=_bor.score2;this.effect=getRandom(4)+1;this.list=e;for(var t=0;t<this.list.length;t++){this.list[t].x=(this.list[t].x-.2)*(pW+4);this.list[t].y=(this.list[t].y+.2)*(pH+4)}if(this.list.length==2){if(this.list[0].x==this.list[1].x){this.over.x=this.list[0].x;this.over.y=(this.list[0].y+this.list[1].y)/2;this.type=0;if(this.list[0].y<this.list[1].y){this.effect1.x=this.list[0].x;this.effect1.y=this.list[0].y;this.effect2.x=this.list[1].x;this.effect2.y=this.list[1].y}else{this.effect1.x=this.list[1].x;this.effect1.y=this.list[1].y;this.effect2.x=this.list[0].x;this.effect2.y=this.list[0].y}this.effect1.i=3;this.effect2.i=1;this.effect2.v=this.effect1.v=(this.over.y-this.effect1.y)/14}else{this.over.y=this.list[0].y;this.over.x=(this.list[0].x+this.list[1].x)/2;this.type=1;if(this.list[0].x<this.list[1].x){this.effect1.x=this.list[0].x;this.effect1.y=this.list[0].y;this.effect2.x=this.list[1].x;this.effect2.y=this.list[1].y}else{this.effect1.x=this.list[1].x;this.effect1.y=this.list[1].y;this.effect2.x=this.list[0].x;this.effect2.y=this.list[0].y}this.effect1.i=2;this.effect2.i=4;this.effect2.v=this.effect1.v=(this.over.x-this.effect1.x)/14}}else if(this.list.length==3){this.over.x=this.list[1].x;this.over.y=this.list[1].y;if(this.list[0].x<this.list[2].x){this.effect1.x=this.list[0].x;this.effect1.y=this.list[0].y;this.effect2.x=this.list[2].x;this.effect2.y=this.list[2].y}else{this.effect1.x=this.list[2].x;this.effect1.y=this.list[2].y;this.effect2.x=this.list[0].x;this.effect2.y=this.list[0].y}if(this.effect1.x==this.over.x){if(this.effect1.y<this.over.y){this.effect1.i=3;this.effect2.i=4;this.type=0}else{this.effect1.i=1;this.effect2.i=4;this.type=1}this.effect1.v=(this.over.y-this.effect1.y)/14;this.effect2.v=(this.over.x-this.effect2.x)/14}else{if(this.effect2.y<this.over.y){this.effect1.i=2;this.effect2.i=3;this.type=2}else{this.effect1.i=2;this.effect2.i=1;this.type=3}this.effect1.v=(this.over.x-this.effect1.x)/14;this.effect2.v=(this.over.y-this.effect2.y)/14}}else if(this.list.length==4){if(this.list[1].x==this.list[2].x){this.over.x=this.list[1].x;this.over.y=(this.list[1].y+this.list[2].y)/2}else if(this.list[1].y==this.list[2].y){this.over.y=this.list[1].y;this.over.x=(this.list[1].x+this.list[2].x)/2}this.effect1.x=this.list[0].x;this.effect1.y=this.list[0].y;this.effect2.x=this.list[3].x;this.effect2.y=this.list[3].y;this.effect1.x1=this.list[1].x;this.effect1.y1=this.list[1].y;this.effect2.x1=this.list[2].x;this.effect2.y1=this.list[2].y;if(this.effect1.x1==this.effect2.x1){if(this.effect1.x<this.effect1.x1){this.effect1.i=2}else{this.effect1.i=4}if(this.effect2.x<this.effect2.x1){this.effect2.i=2}else{this.effect2.i=4}this.type=0;this.effect1.v=(Math.abs(this.over.y-this.effect1.y1)+Math.abs(this.effect1.x1-this.effect1.x))/14;this.effect2.v=(Math.abs(this.over.y-this.effect2.y1)+Math.abs(this.effect2.x1-this.effect2.x))/14}else if(this.effect1.y1==this.effect2.y1){if(this.effect1.y<this.effect1.y1)this.effect1.i=3;else this.effect1.i=1;if(this.effect2.y<this.effect2.y1)this.effect2.i=3;else this.effect2.i=1;this.type=1;this.effect1.v=(Math.abs(this.over.x-this.effect1.x1)+Math.abs(this.effect1.y1-this.effect1.y))/14;this.effect2.v=(Math.abs(this.over.x-this.effect2.x1)+Math.abs(this.effect2.y1-this.effect2.y))/14}this.x1=this.effect1.x;this.y1=this.effect1.y;this.x2=this.effect2.x;this.y2=this.effect2.y}var t=18;this.xX=this.over.x-t;this.yY=this.over.y-t};wayEffect.prototype.update=function(){if(this.list.length==2){if(this.type==0){if(this.effect1.y<this.over.y-9){this.effect1.y+=this.effect1.v;this.effect2.y-=this.effect2.v}}else{if(this.effect1.x<this.over.x-9){this.effect1.x+=this.effect1.v;this.effect2.x-=this.effect2.v}}}else if(this.list.length==3){if(this.type==0){if(this.effect1.y<this.over.y){this.effect1.y+=this.effect1.v;this.effect2.x+=this.effect2.v}}else if(this.type==1){if(this.effect1.y>this.over.y){this.effect1.y+=this.effect1.v;this.effect2.x+=this.effect2.v}}else if(this.type==2){if(this.effect2.y<this.over.y){this.effect1.x+=this.effect1.v;this.effect2.y+=this.effect2.v}}else if(this.type==3){if(this.effect2.y>this.over.y){this.effect1.x+=this.effect1.v;this.effect2.y+=this.effect2.v}}}else if(this.list.length==4){if(this.type==0){if(this.x1<this.effect1.x1){if(this.effect1.x<this.effect1.x1){this.effect1.x+=this.effect1.v;this.effect1.i=2}else{this.effect1.x=this.effect1.x1;if(this.effect1.y<this.over.y){this.effect1.y+=this.effect1.v;this.effect1.i=3}else{this.effect1.y-=this.effect1.v;this.effect1.i=1}}}else{if(this.effect1.x>this.effect1.x1){this.effect1.x-=this.effect1.v;this.effect1.i=4}else{this.effect1.x=this.effect1.x1;if(this.effect1.y<this.over.y){this.effect1.y+=this.effect1.v;this.effect1.i=3}else{this.effect1.y-=this.effect1.v;this.effect1.i=1}}}if(this.x2<this.effect2.x1){if(this.effect2.x<this.effect2.x1){this.effect2.x+=this.effect2.v;this.effect2.i=2}else{this.effect2.x=this.effect2.x1;if(this.effect2.y<this.over.y){this.effect2.y+=this.effect2.v;this.effect2.i=3}else{this.effect2.y-=this.effect2.v;this.effect2.i=1}}}else{if(this.effect2.x>this.effect2.x1){this.effect2.x-=this.effect2.v;this.effect2.i=4}else{this.effect2.x=this.effect2.x1;if(this.effect2.y<this.over.y){this.effect2.y+=this.effect2.v;this.effect2.i=3}else{this.effect2.y-=this.effect2.v;this.effect2.i=1}}}}else if(this.type==1){if(this.y1<this.effect1.y1){if(this.effect1.y<this.effect1.y1){this.effect1.y+=this.effect1.v;this.effect1.i=3}else{this.effect1.y=this.effect1.y1;if(this.effect1.x<this.over.x){this.effect1.x+=this.effect1.v;this.effect1.i=2}else{this.effect1.x-=this.effect1.v;this.effect1.i=4}}}else{if(this.effect1.y>this.effect1.y1){this.effect1.y-=this.effect1.v;this.effect1.i=1}else{this.effect1.y=this.effect1.y1;if(this.effect1.x<this.over.x){this.effect1.x+=this.effect1.v;this.effect1.i=2}else{this.effect1.x-=this.effect1.v;this.effect1.i=4}}}if(this.y2<this.effect2.y1){if(this.effect2.y<this.effect2.y1){this.effect2.y+=this.effect2.v;this.effect2.i=3}else{this.effect2.y=this.effect2.y1;if(this.effect2.x<this.over.x){this.effect2.x+=this.effect2.v;this.effect2.i=2}else{this.effect2.x-=this.effect2.v;this.effect2.i=4}}}else{if(this.effect2.y>this.effect2.y1){this.effect2.y-=this.effect2.v;this.effect2.i=1}else{this.effect2.y=this.effect2.y1;if(this.effect2.x<this.over.x){this.effect2.x+=this.effect2.v;this.effect2.i=2}else{this.effect2.x-=this.effect2.v;this.effect2.i=4}}}}}};wayEffect.prototype.draw=function(){this.context.font="bold 30pt score";this.context.fillStyle="black";if(soundActive)_listSound["effect"+this.effect].play();this.time--;if(this.time>=16){this.context.drawImage(_listImage["effectStart"+this.effect1.i],this.effect1.x,this.effect1.y);this.context.drawImage(_listImage["effectStart"+this.effect2.i],this.effect2.x,this.effect2.y)}else if(this.time>=12){if(this.time==15&&_bor.rearrange){if(_bor.iRearrange<=3){var e=_bor.iRearrange-2;var t;if(_bor.iRearrange==2)t=1;else t=16;if(_bor.pieces[_bor.isSelected[0]].x<_bor.pieces[_bor.isSelected[1]].x){reMa(_bor.isSelected[e],_bor.iRearrange,t,9);reMa(_bor.isSelected[1-e],_bor.iRearrange,t,9)}else{reMa(_bor.isSelected[1-e],_bor.iRearrange,t,9);reMa(_bor.isSelected[e],_bor.iRearrange,t,9)}}else if(_bor.iRearrange<=5){var e=_bor.iRearrange-4;if(_bor.pieces[_bor.isSelected[0]].y<_bor.pieces[_bor.isSelected[1]].y){if(_bor.iRearrange==4){reMa(_bor.isSelected[e],_bor.iRearrange,16,1);reMa(_bor.isSelected[1-e],_bor.iRearrange,16,1)}else{reMa(_bor.isSelected[e],_bor.iRearrange,16,9);reMa(_bor.isSelected[1-e],_bor.iRearrange,16,9)}}else{if(_bor.iRearrange==4){reMa(_bor.isSelected[1-e],_bor.iRearrange,16,1);reMa(_bor.isSelected[e],_bor.iRearrange,16,1)}else{reMa(_bor.isSelected[1-e],_bor.iRearrange,16,9);reMa(_bor.isSelected[e],_bor.iRearrange,16,9)}}}else if(_bor.iRearrange<=7){var n;if(_bor.pieces[_bor.isSelected[0]].x>_bor.pieces[_bor.isSelected[1]].x){n=_bor.isSelected[0];_bor.isSelected[0]=_bor.isSelected[1];_bor.isSelected[1]=n}if(_bor.iRearrange==6){if(_bor.pieces[_bor.isSelected[1]].x<360){reMa(_bor.isSelected[0],2,1,9);reMa(_bor.isSelected[1],2,1,9)}else if(_bor.pieces[_bor.isSelected[0]].x>396){reMa(_bor.isSelected[1],3,16,9);reMa(_bor.isSelected[0],3,16,9)}else if(_bor.pieces[_bor.isSelected[0]].x<360){reMa(_bor.isSelected[0],2,1,9);reMa(_bor.isSelected[1],3,16,9)}}else{if(_bor.pieces[_bor.isSelected[1]].x<360){reMa(_bor.isSelected[1],3,8,9);reMa(_bor.isSelected[0],3,8,9)}else if(_bor.pieces[_bor.isSelected[0]].x>396){reMa(_bor.isSelected[0],2,9,9);reMa(_bor.isSelected[1],2,9,9)}else if(_bor.pieces[_bor.isSelected[0]].x<360){reMa(_bor.isSelected[0],3,8,9);reMa(_bor.isSelected[1],2,9,9)}}}else{var n;if(_bor.pieces[_bor.isSelected[0]].y>_bor.pieces[_bor.isSelected[1]].y){n=_bor.isSelected[0];_bor.isSelected[0]=_bor.isSelected[1];_bor.isSelected[1]=n}if(_bor.iRearrange==8){if(_bor.level>30){var e=240;var t=279}else{var e=210;var t=254}if(_bor.pieces[_bor.isSelected[1]].y<e){reMa(_bor.isSelected[1],5,16,5);reMa(_bor.isSelected[0],5,16,5)}else if(_bor.pieces[_bor.isSelected[0]].y>=t){reMa(_bor.isSelected[0],4,16,6);reMa(_bor.isSelected[1],4,16,6)}else if(_bor.pieces[_bor.isSelected[0]].y<e){reMa(_bor.isSelected[0],5,16,5);reMa(_bor.isSelected[1],4,16,6)}}else{if(_bor.pieces[_bor.isSelected[1]].y<240){reMa(_bor.isSelected[0],4,16,1);reMa(_bor.isSelected[1],4,16,1)}else if(_bor.pieces[_bor.isSelected[0]].y>=279){reMa(_bor.isSelected[1],5,16,9);reMa(_bor.isSelected[0],5,16,9)}else if(_bor.pieces[_bor.isSelected[0]].y<240){reMa(_bor.isSelected[0],4,16,1);reMa(_bor.isSelected[1],5,16,9)}}}_bor.pieces[_bor.isSelected[0]].Selected=null;_bor.pieces[_bor.isSelected[1]].Selected=null;_bor.isSelected=[];_bor.search=check()}this.context.drawImage(_listImage["effect2"+this.effect],0,0,90,90,this.xX,this.yY,80,80);if(this.score)this.context.fillText("x"+this.score,this.xX+45,this.yY+45)}else if(this.time>=8){this.context.drawImage(_listImage["effect2"+this.effect],90,0,90,90,this.xX,this.yY,80,80);if(this.score)this.context.fillText("x"+this.score,this.xX+45,this.yY+45)}else if(this.time>=4){this.context.drawImage(_listImage["effect2"+this.effect],180,0,90,90,this.xX,this.yY,80,80);if(this.score)this.context.fillText("x"+this.score,this.xX+45,this.yY+45)}else if(this.time>=0){this.context.drawImage(_listImage["effect2"+this.effect],270,0,90,90,this.xX,this.yY,80,80);if(this.score)this.context.fillText("x"+this.score,this.xX+45,this.yY+45)}this.update()};comeLel.prototype.draw=function(e,t){_listSound["soundMain"].pause();_listSound["soundMain"].currentTime=0;this.update();this.context.drawImage(_listImage["fontmo"],0,0);if(this.counter==5){this.counter=0;if(this.i>=5){this.i=0}else{this.i++}}else{this.counter++}this.check=e;if(e){this.context.drawImage(_listImage["go_win"],225,125);if(soundActive)_listSound["pika_win"].play();this.context.drawImage(_listImage["pika_win"],this.i*264,0,264,264,80,75,250,250);this.context.drawImage(_listImage["star_"+t],290,200,250,100);if(!this.nextlevel)this.context.drawImage(_listImage["buttonNext"],480,290,81,80);else this.context.drawImage(_listImage["buttonNext"],480,290,91,90)}else{this.context.drawImage(_listImage["loseBgr"],0,0);this.context.drawImage(_listImage["pika_lose"],this.i*264,0,264,264,270,20,250,250);if(soundActive)_listSound["pika_lose"].play()}this.context.font="bold 35pt score";this.context.fillStyle="#873502";this.context.drawImage(_listImage["send1"],260,410);if(this.l||this.u){if(this.xlu<160)this.xlu+=10;else{if(this.xlui!=100)this.xlui++;else{if(this.xlu<800)this.xlu+=10}}if(this.l)this.context.drawImage(_listImage["updateS"],this.xlu,365);else this.context.drawImage(_listImage["login"],this.xlu,365)}if(this.sendscore==1)this.context.drawImage(_listImage["send3"],486,415);else this.context.drawImage(_listImage["send2"],486,415);if(this.popup&&!this.sendsuccess)this.context.drawImage(_listImage["popup"],540,400);this.context.fillText(arrayScore[0],295,454);if(!this.reset)this.context.drawImage(_listImage["resetPress"],400,290,81,80);else this.context.drawImage(_listImage["resetPress"],400,290,91,90);if(!this.menuSelect)this.context.drawImage(_listImage["buttonMenuSelect"],320,290,81,80);else this.context.drawImage(_listImage["buttonMenuSelect"],320,290,91,90)};comeLel.prototype.update=function(){if(targetX<=561&&targetY<=370&&targetX>=480&&targetY>=290){this.nextlevel=1;this.reset=0;this.menuSelect=0;return}else this.nextlevel=0;if(targetX<=481&&targetY<=370&&targetX>=400&&targetY>=290){this.reset=1;this.nextlevel=0;this.menuSelect=0;return}else this.reset=0;if(targetX<=481&&targetY<=370&&targetX>=320&&targetY>=290){this.reset=0;this.menuSelect=1;this.nextlevel=0;return}else this.menuSelect=0;if(targetX<=533&&targetY<=458&&targetX>=486&&targetY>=415){this.popup=false;this.sendscore=1;return}else{this.sendscore=0;this.popup=true}};comeLel.prototype.mouseDown=function(){if(this.reset){_menPly.activeMenu=1;this.sendsuccess=false;_bor.active=0;_bor.overTime=0;_meTo.activeTools=0;_bor.createNewGame(_bor.level);_bor.complete=0;_listSound["pika_lose"].pause();this.reset=0;this.sendscore=0;this.l=false;this.u=false}else if(this.nextlevel&&this.check){_tiCo.ties=386;var e;_bor.level++;if(!(_bor.level%10))_bor.level++;_bor.createNewGame(_bor.level);_bor.complete=0;if(_bor.level>39)_bor.fihGae=1;this.sendsuccess=false;this.sendscore=0;this.l=false;this.u=false}else if(this.menuSelect){borActive=0;selectBgrActive=1;_selectLevel.add=0;_selectLevel.start(_selectBgr.piecesTouch);this.menuSelect=0;_listSound["pika_lose"].pause();clearInterval(_tiCo.alertID);clearInterval(_tiCo.timeID);this.sendsuccess=false;this.sendscore=0;this.l=false;this.u=false}else if(this.sendscore){this.xlui=1;this.xlu=-480;this.sendsuccess=true;if(this.haveUser==1){this.l=true;$.ajax({type:"POST",url:"server_api/highscore.php",data:{data:arrayScore[0]},success: function(msg){console.log(msg)}})}else{this.l=false;this.u=true}}};sttLel.prototype.draw=function(){if(this.j)this.context.drawImage(_listImage["fontmo"],0,0);if(!this.type){if(this.x>185){this.x-=this.v;this.context.drawImage(_listImage["sttLel1"],this.x,115)}else{this.context.drawImage(_listImage["sttLel0"],220,150);this.i--;if(this.i==30)this.j=0;if(this.i==20)this.j=1;if(!this.i)this.type=1}}else{if(this.x>-370){this.x-=this.v;this.context.drawImage(_listImage["sttLel1"],this.x,115)}else{this.j=0;_bor.sttLel=1;_menPly.activeMenu=0;_bor.active=0;_tiCo.start(_bor.ties)}}};var videoElement=document.getElementById("canvas");Pieces.prototype.draw=function(e){if(this.Selected)e.drawImage(_listImage["squarec1"],this.x,this.y,this.width,this.height);else if(this.setHighlight==1)e.drawImage(_listImage["squarec2"],this.x,this.y,this.width,this.height);else if(this.search==1){if(_bor.isSelected[0]==null){this.count--;if(this.count>=10)e.drawImage(_listImage["squarec3"],this.x,this.y,this.width,this.height);else if(this.count>=0)e.drawImage(_listImage["squarec4"],this.x,this.y,this.width,this.height);else this.count=21}else{this.search=null}}else e.drawImage(_listImage["square1"],this.x,this.y,this.width,this.height);e.drawImage(_listImage["pieces"+this.number],this.x,this.y,this.width,this.height);if(this.a){if(!this.i1){this.i2+=.07;if(this.i2>=1)this.i1=1}else{this.i2-=.07;if(this.i2<=0)this.i1=0}e.globalAlpha=this.i2;e.drawImage(_listImage["menuNumber"],440,0,44,53,this.x,this.y,20,27);e.globalAlpha=1}};Pieces.prototype.moMoPi=function(e,t){if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height)return true;return false};Pieces.prototype.isSelected=function(e){if(this.number!=-1){this.Selected=1;e.strokeStyle="red"}};var res={pieces1:"images/pieces1.png",pieces2:"images/pieces2.png",pieces3:"images/pieces3.png",pieces4:"images/pieces4.png",pieces5:"images/pieces5.png",pieces6:"images/pieces6.png",pieces7:"images/pieces7.png",pieces8:"images/pieces8.png",pieces9:"images/pieces9.png",pieces10:"images/pieces10.png",pieces11:"images/pieces11.png",pieces12:"images/pieces12.png",pieces13:"images/pieces13.png",pieces14:"images/pieces14.png",pieces15:"images/pieces15.png",pieces16:"images/pieces16.png",pieces17:"images/pieces17.png",pieces18:"images/pieces18.png",pieces19:"images/pieces19.png",pieces20:"images/pieces20.png",pieces21:"images/pieces21.png",pieces22:"images/pieces22.png",pieces23:"images/pieces23.png",pieces24:"images/pieces24.png",pieces25:"images/pieces25.png",pieces26:"images/pieces26.png",pieces27:"images/pieces27.png",pieces28:"images/pieces28.png",pieces29:"images/pieces29.png",pieces30:"images/pieces30.png",pieces31:"images/pieces31.png",pieces32:"images/pieces32.png",pieces33:"images/pieces33.png",pieces34:"images/pieces34.png",pieces35:"images/pieces35.png",pieces36:"images/pieces36.png",square1:"images/square_1.png",square2:"images/square_2.png",square3:"images/square_3.png",square4:"images/square_4.png",square5:"images/square_5.png",squarec1:"images/squarec_1.png",squarec2:"images/squarec_2.png",squarec3:"images/squarec_3.png",squarec4:"images/squarec_4.png",squarec5:"images/squarec_5.png",background0:"images/bgr0.jpg",background1:"images/bgr1.jpg",background2:"images/bgr2.jpg",background3:"images/bgr3.jpg",background4:"images/bgr4.jpg",background5:"images/bgr5.jpg",background6:"images/bgr6.jpg",background7:"images/bgr7.jpg",background8:"images/bgr8.jpg",background9:"images/bgr9.jpg",background10:"images/bgr10.jpg",background11:"images/bgr11.jpg",backgroundFinish:"images/background_gameover.jpg",start:"images/buttonu_0_1.png",start2:"images/buttonu_0_2.png",button_5_1:"images/button_5_1.png",button_0_1:"images/button_0_1.png",button_0_2:"images/button_0_2.png",buttonInfo:"images/button_info.png",helpActive:"images/help1.jpg",screen:"images/background_main.jpg",fontmo:"images/fontmo.png",loseBgr:"images/loseBgr.png",go_win:"images/go_win.png",go_lose:"images/go_lose.png",pika_win:"images/pika_win.png",pika_lose:"images/pika_lose.png",star2_0:"images/star2_0.png",star2_1:"images/star2_1.png",star2_2:"images/star2_2.png",star2_3:"images/star2_3.png",scoreBar:"images/stage_score.png",menutool:"images/menutool.png",menutool1:"images/menutool1.png",merge:"images/item_4.png",mergePress:"images/itemc_4.png",search:"images/item_3.png",searchPress:"images/itemc_3.png",boom:"images/item_5.png",boomPress:"images/itemc_5.png",time:"images/item_6.png",timePress:"images/itemc_6.png",mergePress:"images/itemc_3.png",changePress:"images/itemc_4.png",boomPress:"images/itemc_5.png",timePress:"images/itemc_6.png",pause:"images/item_0.png",pausePress:"images/itemc_0.png",imagePause:"images/background_pause.jpg",reset:"images/buttongoc_1.png",resetPress:"images/buttongo_1.png",buttonMenuSelect:"images/buttongo_0.png",buttonNext:"images/buttongo_2.png",buttonMusic0:"images/button_4_1.png",buttonMusic1:"images/button_4_2.png",timeBar:"images/time_0.png",timeBar1:"images/time_1.png",buttonLeft0:"images/button_left.png",buttonLeft1:"images/buttonc_left.png",buttonRight0:"images/button_right.png",buttonRight1:"images/buttonc_right.png",selectBgr:"images/background_level1.jpg",level1:"images/level_1.png",level1Press:"images/level_1_press.png",level1Complete:"images/levelc_1.png",level2:"images/level_2.png",level2Press:"images/level_2_press.png",level2Lock:"images/level_2_lock.png",level2Complete:"images/levelc_2.png",level3:"images/level_3.png",level3Press:"images/level_3_press.png",level3Lock:"images/level_3_lock.png",level3Complete:"images/levelc_3.png",level4:"images/level_4.png",level4Press:"images/level_4_press.png",level4Complete:"images/levelc_4.png",level4Soon:"images/level_4_soon.png",pokeball:"images/pokeball.png",pokeballu_1:"images/pokeballu_1.png",pokeballu_2:"images/pokeballu_2.png",pokeballu_3:"images/pokeballu_3.png",pokeballu_4:"images/pokeballu_4.png",pokeballu_5:"images/pokeballu_5.png",menuNumber:"images/menu_number.png",effect21:"images/effect_2_1.png",effect22:"images/effect_2_2.png",effect23:"images/effect_2_3.png",effect24:"images/effect_2_4.png",effectStart1:"images/effect1.png",effectStart2:"images/effect2.png",effectStart3:"images/effect3.png",effectStart4:"images/effect4.png",sttLel0:"images/start.png",sttLel1:"images/start2.png",star_0:"images/star_0.png",star_1:"images/star_1.png",star_2:"images/star_2.png",star_3:"images/star_3.png",sumStar:"images/sumStar.png",boomEffect:"images/boom.png",send1:"images/sendscore1.png",send2:"images/sendscore2.png",send3:"images/sendscore3.png",score5:"images/5.png",full:"images/fullscreen.png",popup:"images/popup.png",login:"images/login.png",updateS:"images/updateS.png"};var res2={soundMain:"sound/main.ogg",pika_win:"sound/pika_win.ogg",pika_lose:"sound/pika_lose.ogg",pikaSection:"sound/pika_section.ogg",level1:"sound/level_1.ogg",level2:"sound/level_2.ogg",level3:"sound/level_3.ogg",level4:"sound/level_4.ogg",pikaSelect:"sound/pika_select.ogg",pikaWho:"sound/pika_who.ogg",pikaSad:"sound/pika_sad.ogg",effect1:"sound/effect_1.ogg",effect2:"sound/effect_2.ogg",effect3:"sound/effect_4.ogg",effect4:"sound/effect_5.ogg",boom:"sound/explosion.ogg"};var _listImage={};var _listSound={};Screen.prototype.draw=function(){if(soundActive)this.typeMusic=0;else this.typeMusic=1;if(soundActive)_listSound["soundMain"].play();this.mouseMove();this.context.drawImage(_listImage["screen"],0,0,800,480);if(this.isMouseOver)this.context.drawImage(_listImage["start2"],302,220,188,83);else this.context.drawImage(_listImage["start"],302,220,188,83);this.context.drawImage(_listImage["button_5_1"],700,270);if(!this.isInfo)this.context.drawImage(_listImage["button_0_1"],370,330);else this.context.drawImage(_listImage["button_0_2"],370,330);this.context.drawImage(_listImage["buttonMusic"+this.typeMusic],700,270);this.context.drawImage(_listImage["buttonInfo"],700,330);if(this.helpActive)this.context.drawImage(_listImage["helpActive"],0,0)};Screen.prototype.start=function(){var e=this;this.mouseMove=function(){e.canvas.style.cursor="default";if(!e.helpActive){this.i=e.contain(targetX,targetY);if(this.i==0){e.isMouseOver=1}else if(this.i==1){e.isInfo=1}else if(this.i==2){e.isMusic=1;e.isHelp=0}else if(this.i==3){e.isHelp=1;e.isMusic=0}else{e.isMouseOver=0;e.isInfo=0;e.isMusic=0;e.isHelp=0}}if(e.isMouseOver||e.isInfo||e.isMusic||e.isHelp||e.helpActive){e.canvas.style.cursor="pointer"}};this.mouseDown=function(){e.helpActive=0;if(e.isHelp){e.helpActive=1;e.isHelp=0}else if(e.isMouseOver){_selectBgr.start();e.canvas.style.cursor="default";screenActive=0;selectBgrActive=1;_listSound["soundMain"].pause();_listSound["soundMain"].currentTime=0;if(soundActive)_listSound["pikaSelect"].play()}else if(e.isInfo){alert("Phát hành bởi Sunnet ITC\nPhát triển: Trương Hoàng Linh \nĐồ họa:    	 Nguyễn Tuấn Vũ")}else if(e.isMusic){if(soundActive){soundActive=0;this.typeMusic=1;_listSound["soundMain"].pause()}else{soundActive=1;this.typeMusic=0}}}};selectBgr.prototype.start=function(){for(var e=0;e<=3;e++){this.selectLevel[e].update(this.context)}self=this;this.mouseMove=function(){self.canvas.style.cursor="default";self.piecesTouch=null;for(var e=0;e<self.selectLevel.length;e++){if(self.selectLevel[e].moMoPi(targetX,targetY)){self.canvas.style.cursor="pointer";self.piecesTouch=e;self.selectLevel[e].moveMouse=true}else self.selectLevel[e].moveMouse=false}if(self.piecesTouch==null){if(targetX>=20&&targetY>=400&&targetX<=90&&targetY<=465){this.i=0;return}else this.i=1;if(targetX>=705&&targetY>=400&&targetX<=780&&targetY<=465){this.j=0}else this.j=1}};this.mouseDown=function(){if(this.selectLevelActive==0){if(self.piecesTouch!=null){if(self.selectLevel[self.piecesTouch].openLevel){self.canvas.style.cursor="default";_listSound["pikaSection"].pause();_listSound["pikaSection"].currentTime=0;if(soundActive){_listSound["level"+(self.piecesTouch+1)].play()}_selectLevel.add=0;_selectLevel.selectLevel=[];_selectLevel.start(self.piecesTouch);this.selectLevelActive=1}else{alert("Chưa mở khóa!")}}else if(!this.i){if(!this.page){selectBgrActive=0;screenActive=1;_listSound["pikaSection"].pause();_listSound["pikaSection"].currentTime=0}else{this.nextScreen=0;this.page=0}}else if(!this.j){if(this.page<1){this.way=(this.selectLevel[2].x-this.xNext1)/30;this.nextScreen=1;this.page=1}}}else if(this.selectLevelActive==1){_selectLevel.mouseDown()}}};selectBgr.prototype.draw=function(){if(this.selectLevelActive==0){if(this.nextScreen){if(this.selectLevel[2].x>=this.xNext1){for(var e=0;e<=3;e++){this.selectLevel[e].x-=this.way}}}else if(this.selectLevel[0].x<this.xNext1){for(var e=0;e<=3;e++){this.selectLevel[e].x+=this.way}}if(soundActive)_listSound["pikaSection"].play();this.mouseMove();this.context.drawImage(_listImage["selectBgr"],0,0,800,480);for(var e=0;e<=3;e++){this.selectLevel[e].draw(this.context,e)}this.context.drawImage(_listImage["buttonLeft"+this.i],20,400);if(this.page<1)this.context.drawImage(_listImage["buttonRight"+this.j],705,400)}else if(this.selectLevelActive==1){_selectLevel.draw()}};levelPikachu.prototype.update=function(e){if(this.numberLevel<=arrayStar[0]/10+1)this.openLevel=true;e.font="bold 70pt score";e.fillStyle="black";this.sum=0;for(var t=this.j1;t<=this.j2;t++){if(!arrayStar[t])return;this.sum+=parseInt(arrayStar[t])}};levelPikachu.prototype.draw=function(e,t){if(this.openLevel){if(this.sum==27)e.drawImage(_listImage["level"+(t+1)+"Complete"],this.x,50,380,380);else{if(this.moveMouse==false)e.drawImage(_listImage["level"+(t+1)],this.x,50,380,380);else e.drawImage(_listImage["level"+(t+1)+"Press"],this.x,50,380,380);e.drawImage(_listImage["sumStar"],this.x,50,380,380);e.drawImage(_listImage["menuNumber"],440,0,44,54,this.x+205,240,80,80);if(this.sum<10){e.fillText(this.sum,this.x+115,310)}else e.fillText(this.sum,this.x+90,310)}}else if(t==3)e.drawImage(_listImage["level4Soon"],this.x,50,380,380);else e.drawImage(_listImage["level"+(t+1)+"Lock"],this.x,50,380,380)};levelPikachu.prototype.moMoPi=function(e,t){if(e>=this.x+30&&e<=this.x+340&&t>=77&&t<=390)return true;return false};selectLevel.prototype.start=function(e){this.score=arrayScore[0];this.level=e;if(!this.add){this.leveli=e*10;for(var t=1;t<=10;t++){var n=new setLevel(this.leveli,t);this.selectLevel.push(n)}this.add=1}if(soundActive)_listSound["pikaWho"].currentTime=0;self=this;this.mouseMove=function(){self.canvas.style.cursor="default";self.piecesTouch=null;for(var e=0;e<self.selectLevel.length;e++){if(self.selectLevel[e].moMoPi(targetX,targetY)){self.canvas.style.cursor="pointer";self.piecesTouch=e;self.selectLevel[e].moveMouse=true}else self.selectLevel[e].moveMouse=false}};this.mouseDown=function(){if(self.piecesTouch!=null){if(self.selectLevel[self.piecesTouch].numberLevel==10){if(soundActive){_listSound["pikaSelect"].play();_listSound["level"+(this.level+1)].pause();_listSound["level"+(this.level+1)].currentTime=0}self.canvas.style.cursor="default";_selectBgr.selectLevelActive=0;_selectBgr.start()}else if(self.selectLevel[self.piecesTouch].openLevel){self.canvas.style.cursor="default";if(_bor.complete||_bor.overTime||self.piecesTouch+1+this.level*10!=_bor.level){if(soundActive)_listSound["pikaWho"].play();selectBgrActive=0;borActive=1;_bor.createNewGame(self.selectLevel[self.piecesTouch].numberLevel);_bor.complete=0;_bor.overTime=0}else{selectBgrActive=0;borActive=1;_bor.active=0;_tiCo.start(_bor.ties);_menPly.activeMenu=0}}else alert("Hoàn thành level trước đã!")}}};selectLevel.prototype.draw=function(){this.mouseMove();this.context.drawImage(_listImage["selectBgr"],0,0,800,480);for(var e=0;e<this.selectLevel.length;e++){this.selectLevel[e].draw(this.context,this.level)}this.context.drawImage(_listImage["score5"],330,5,210,52);this.context.font="bold 17pt score";this.context.fillStyle="#873502";this.context.fillText("Score:"+this.score,340,40)};setLevel.prototype.draw=function(e,t){if(this.numberLevel==10){if(this.moveMouse)e.drawImage(_listImage["buttonLeft0"],75,200);else e.drawImage(_listImage["buttonLeft1"],75,200)}else if(this.openLevel){e.drawImage(_listImage["pokeballu_"+(t+1)],this.x,this.y,150,150);e.drawImage(_listImage["star_"+this.star],this.x,this.y,150,65);e.drawImage(_listImage["menuNumber"],this.numberDraw,0,44,54,this.numberX,this.numberY,50,50)}else{e.drawImage(_listImage["pokeball"],this.x,this.y,150,150)}};setLevel.prototype.moMoPi=function(e,t){if(this.numberLevel==10&&e>=80&&e<=146&&t>=205&&t<=264){return true}else if(e>=this.x+16&&e<=this.x+130&&t>=this.y+15&&t<=this.y+130)return true;return false};tiCo.prototype.start=function(e){this.dec=this.ties/e/60;self=this;this.t=this.dec*60;this.timeID=setInterval(function(){self.decTime()},1e3/60);if(_bor.level>19){this.alertID=setInterval(function(){self.alertTime()},1e3)}};tiCo.prototype.draw=function(){this.context.drawImage(_listImage["timeBar"],200,-10);if(this.ties>=0)this.context.drawImage(_listImage["timeBar1"],0,0,this.ties,60,200,-10,this.ties,60)};tiCo.prototype.decTime=function(){this.t1++;this.ties-=this.dec;if(this.ties<=0){clearInterval(this.timeID);clearInterval(this.alertID);_bor.active=1;_bor.overTime=1}};tiCo.prototype.alertTime=function(){var e;this.t2++;if(this.sttDoe){_bor.doubleScore=1;this.sttDoe++;this.t3=this.savePoint+_bor.score2*100;if(this.sttDoe==7){e=(this.savePoint+_bor.score2*100)*2;_bor.score+=e;_bor.arrScore=trSco(_bor.score);_bor.k=0;this.sttDoe=0;this.savePoint=0;_bor.doubleScore=0}}if(this.t2%5==0){e=Math.floor(Math.random()*143)+1;this.random=Math.floor(Math.random()*5+1);if(this.save)_bor.pieces[this.save].a=0;if(_bor.pieces[e])_bor.pieces[e].a=1;this.save=e;this.t2=0}}